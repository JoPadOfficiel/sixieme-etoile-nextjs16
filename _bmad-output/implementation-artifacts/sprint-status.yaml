generated: "2026-01-01T21:51:00+01:00"
project: sixieme-etoile-nextjs16
project_key: file-system-local
tracking_system: file-system
story_location: _bmad-output/implementation-artifacts
development_status:
  epic-1: done
  1-1-define-vtc-erp-prisma-models: done
  1-2-enforce-organization-level-multi-tenancy: done
  1-3-implement-eur-only-monetary-representation: done
  1-4-implement-europe-paris-business-time-strategy: done
  1-5-integration-settings-storage-for-google-maps-collectapi: done
  epic-1-retrospective: optional
  epic-2: done
  2-1-implement-contact-model-basic-crm-ui: done
  2-2-store-partner-contract-data-rate-grid-links: done
  2-3-allow-safe-reclassification-between-partner-and-private: done
  2-4-link-quotes-and-invoices-to-contacts-partner-agencies: done
  2-5-expose-commercial-context-in-crm-views: done
  epic-2-retrospective: optional
  epic-3: done
  3-1-implement-pricingzone-model-zones-editor-ui: done
  3-2-implement-zoneroute-model-grid-routes-editor: done
  3-3-implement-excursion-dispo-forfait-configuration: done
  3-4-apply-engagement-rule-for-partner-grid-trips: done
  3-5-fallback-to-dynamic-pricing-when-no-grid-match-exists: done
  3-6-visualise-grid-coverage-and-gaps: done
  epic-3-retrospective: optional
  epic-4: done
  4-1-implement-base-dynamic-price-calculation: done
  4-2-add-operational-cost-components-to-internal-cost: done
  4-3-apply-multipliers-and-target-margins: done
  4-4-allow-operator-override-with-live-profitability-feedback: done
  4-5-implement-multi-base-candidate-selection-pre-filter: done
  4-6-implement-shadow-calculation-segments-a-b-c-tripanalysis-storage: done
  4-7-compute-expose-profitability-indicator: done
  4-8-use-fuel-price-cache-in-pricing-engine: done
  epic-4-retrospective: optional
  epic-5: done
  5-1-implement-fleet-models-fleet-bases-ui: done
  5-2-implement-drivers-licence-categories-rse-rules: done
  5-3-implement-heavy-vehicle-compliance-validator: done
  5-4-suggest-alternative-staffing-scheduling-options: done
  5-5-track-rse-counters-per-driver-licence-regime: done
  5-6-surface-compliance-statuses-logs-in-ui: done
  epic-5-retrospective: optional
  epic-6: done
  6-1-implement-quotes-list-with-status-profitability: done
  6-2-implement-create-quote-3-column-cockpit: done
  6-3-implement-quote-detail-with-stored-tripanalysis: done
  6-4-implement-quote-lifecycle-status-transitions: done
  6-5-implement-blocking-non-blocking-alerts-for-impossible-or-risky-trips: done
  6-6-implement-helpers-for-common-scenarios-airport-capacity: done
  6-7-integrate-triptransparencypanel-profitability-indicator-across-screens: done
  6-8-manual-editing-of-cost-components-in-trip-transparency: done
  epic-6-retrospective: optional
  epic-7: done
  7-1-implement-invoice-invoiceline-models-and-invoices-ui: done
  7-2-convert-accepted-quote-to-invoice-with-deep-copy-semantics: done
  7-3-implement-vat-breakdown-for-transport-ancillary-services: done
  7-4-integrate-commission-calculation-into-invoices: done
  7-5-implement-document-generation-storage-for-quotes-invoices-mission-orders: done
  epic-7-retrospective: optional
  epic-8: done
  8-1-implement-dispatch-screen-layout-missions-list-map-transparency: done
  8-2-implement-assignment-drawer-with-candidate-vehicles-drivers-flexibility-score: done
  8-3-implement-multi-base-optimisation-visualisation: done
  8-4-detect-suggest-trip-chaining-opportunities: done
  8-5-model-surface-empty-leg-opportunities: done
  8-6-integrate-subcontractor-directory-subcontracting-suggestions: done
  8-7-surface-profitability-compliance-badges-for-missions: done
  epic-8-retrospective: optional
  epic-9: done
  9-1-implement-settings-pricing-seasonal-multipliers: done
  9-2-implement-settings-pricing-advanced-rate-modifiers: done
  9-3-implement-settings-pricing-optional-fees-catalogue: done
  9-4-implement-settings-pricing-promotions-promo-codes: done
  9-5-implement-settings-fleet-regulatory-configuration: done
  9-6-implement-settings-integrations-google-maps-collectapi: done
  9-7-implement-fuel-price-cache-refresh-staleness-rules: done
  9-8-implement-basic-profitability-yield-reporting: done
  epic-9-retrospective: optional
  epic-10: done
  10-1-fix-google-maps-integration-in-quotes-dispatch: done
  epic-10-retrospective: optional
  epic-11: done
  11-1-implement-unified-zone-management-with-interactive-map: done
  11-2-implement-postal-code-zone-creation: done
  11-3-integrate-zone-pricing-multipliers: done
  11-4-merge-seasonal-multipliers-advanced-rates-ui: done
  11-5-merge-optional-fees-promotions-ui: done
  11-6-implement-collapsible-main-sidebar: done
  11-7-remove-deprecated-advanced-rate-types: done
  11-8-implement-full-responsive-design-mobile-sidebar: done
  epic-11-retrospective: optional
  epic-12: done
  12-1-implement-partner-specific-pricing-schema: done
  12-2-implement-pricing-engine-override-support: done
  12-3-implement-partner-contract-override-ui: done
  epic-12-retrospective: optional
  epic-13: done
  13-1-fix-pricing-ui-translations: done
  13-2-implement-pricing-pages-partner-filter: done
  epic-13-retrospective: optional
  epic-14: done
  14-1-fix-vehicle-category-dropdown-bug: done
  14-2-extend-zoneroute-schema-for-multi-zone-address-support: done
  14-3-update-pricing-ui-for-flexible-routes: done
  14-4-implement-interactive-map-for-zone-selection: done
  14-5-update-pricing-engine-for-multi-zone-routes: done
  14-6-assign-rate-grids-to-partners-from-pricing-ui: done
  epic-14-retrospective: optional
  epic-15: done
  15-1-integrate-google-routes-api-for-real-toll-costs: done
  15-2-use-vehicle-specific-fuel-consumption-in-all-pricing-paths: done
  15-3-apply-vehicle-category-price-multipliers-in-dynamic-pricing: done
  15-4-use-vehicle-category-default-rates-for-dynamic-pricing: done
  15-5-differentiate-pricing-by-trip-type-transfer-excursion-dispo: done
  15-6-use-correct-fuel-type-from-vehicle-category: done
  15-7-propagate-cost-breakdown-to-quotes-and-invoices: done
  15-8-validate-pricing-consistency-across-application: done
  epic-15-retrospective: optional
  epic-16: done
  16-1-etendre-le-schema-quote-pour-les-types-de-trajets: done
  16-2-formulaire-dynamique-par-type-de-trajet: done
  16-3-integration-des-zones-dans-le-calcul-dynamique: done
  16-4-prix-bloques-pour-agences-partenaires: done
  16-5-simplifier-l-affichage-triptransparency: done
  16-6-calcul-prix-aller-retour-pour-transfer: done
  16-7-calcul-prix-excursion-multi-arrets: done
  16-8-calcul-prix-mise-a-disposition: done
  16-9-support-off-grid-avec-notes-obligatoires: done
  16-10-tests-e2e-pour-tous-les-types-de-trajets: done
  epic-16-retrospective: optional
  epic-17: done
  17-1-configurable-zone-conflict-resolution-strategy: done
  17-2-configurable-zone-multiplier-aggregation-strategy: done
  17-3-automatic-compliance-driven-staffing-integration: done
  17-4-configurable-staffing-cost-parameters: done
  17-5-quote-estimated-end-time-estimatedendat: done
  17-6-driver-calendar-events-model: done
  17-7-driver-availability-overlap-detection: done
  17-8-weighted-day-night-rate-application: done
  17-9-configurable-time-buckets-for-mad-pricing: done
  17-10-zone-fixed-surcharges-friction-costs: done
  17-11-zone-topology-validation-tools: done
  17-12-driver-home-location-for-deadhead-calculations: done
  17-13-route-segmentation-for-multi-zone-trips: done
  17-14-vehicle-tco-model-enrichment: done
  17-15-client-difficulty-score-patience-tax: done
  17-16-fr-group-9-settings-ui-integration: done
  epic-17-retrospective: optional
  epic-18: done
  18-1-corridor-zone-type-highway-buffers: done
  18-2-automatic-transfer-to-mad-detection-dense-zone: done
  18-3-round-trip-to-mad-automatic-detection: done
  18-4-loss-of-exploitation-opportunity-cost-calculation: done
  18-5-stay-vs-return-empty-scenario-comparison: done
  18-6-multi-scenario-route-optimization-min-t-min-d-min-tco: done
  18-7-transversal-trip-decomposition: done
  18-8-fixed-temporal-vectors-classic-destinations: done
  18-9-shadow-fleet-integration-subcontractors: done
  18-10-hierarchical-pricing-algorithm-implementation: done
  18-11-configurable-transfer-to-mad-thresholds: done
  epic-18-retrospective: optional
  epic-19: done
  19-1-fix-double-category-pricing: done
  19-2-implement-automatic-rse-compliant-staffing-for-long-trips: done
  19-3-fix-excursion-pricing-to-include-return-trip-cost: done
  19-4-fix-dispo-pricing-formula: done
  19-5-fix-off-grid-trip-type-to-show-manual-pricing-ui: done
  19-6-implement-automatic-vehicle-category-selection-based-on-capacity: done
  19-7-fix-route-trace-display-on-quote-map: done
  19-8-fix-vehicle-driver-assignment-in-dispatch: done
  19-9-enlarge-assignment-and-detail-panels-in-dispatch: done
  19-10-move-ui-blocks-for-better-quote-layout: done
  19-11-add-address-field-to-operating-base-form: done
  19-12-display-driver-missions-in-driver-calendar: done
  19-13-validate-zone-conflict-resolution-for-concentric-circles: done
  19-14-add-comprehensive-pricing-tests: done
  19-15-decompose-pricing-engine-into-modular-architecture: done
  19-16-implement-mandatory-testing-protocol-for-all-stories: done
  epic-19-retrospective: optional
  epic-20: done
  20-1-fix-triptransparencypanel-segments-null-safety: done
  20-2-migrate-to-google-routes-api: done
  20-3-integrate-real-toll-costs-from-routes-api: done
  20-4-fix-rse-second-driver-cost-calculation: done
  20-5-integrate-collectapi-diesel-price: done
  20-6-fix-vehicle-category-price-multiplier-application: done
  20-7-fix-route-display-on-quote-detail-map: done
  20-8-implement-dual-driver-assignment-for-rse-trips: done
  20-9-comprehensive-end-to-end-testing-suite: done
  20-10-validate-reports-page-functionality: done
  epic-20-retrospective: optional
  epic-21: in_progress
  21-1-ultra-detailed-staffing-costs-display-in-triptransparency: done
  21-2-detailed-approach-fee-and-empty-return-display: done
  21-3-ultra-detailed-travel-time-calculation-breakdown: done
  21-4-pricing-segments-and-traversed-zones-visualization: backlog
  21-5-rse-staffing-integration-in-dispatch: backlog
  21-6-automatic-empty-return-and-availability-calculation: backlog
  21-7-enhanced-triptransparency-interface-with-detailed-calculation: backlog
  21-8-zone-based-cost-transparency-enhancement: backlog
  21-9-real-time-cost-calculation-validation: backlog
  epic-21-retrospective: optional
